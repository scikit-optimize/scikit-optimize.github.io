

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="Description" content="scikit-optimize: machine learning in Python">

  
  <title>Visualizing optimization results &mdash; scikit-optimize 0.8.dev0 documentation</title>
  
  <link rel="canonical" href="https://scikit-optimize.github.io/auto_examples/plots/visualizing-results.html" />

  
  <link rel="shortcut icon" href="../../_static/favicon.ico"/>
  

  <link rel="stylesheet" href="../../_static/css/vendor/bootstrap.min.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/gallery.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
<script id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
<script src="../../_static/jquery.js"></script> 
</head>
<body>
<nav id="navbar" class="sk-docs-navbar navbar navbar-expand-md navbar-light bg-light py-0">
  <div class="container-fluid sk-docs-container px-0">
      <a class="navbar-brand py-0" href="../../index.html">
        <img
          class="sk-brand-img"
          src="../../_static/logo.png"
          alt="logo"/>
      </a>
    <button
      id="sk-navbar-toggler"
      class="navbar-toggler"
      type="button"
      data-toggle="collapse"
      data-target="#navbarSupportedContent"
      aria-controls="navbarSupportedContent"
      aria-expanded="false"
      aria-label="Toggle navigation"
    >
      <span class="navbar-toggler-icon"></span>
    </button>

    <div class="sk-navbar-collapse collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav mr-auto">
        <li class="nav-item">
          <a class="sk-nav-link nav-link" href="../../install.html">Install</a>
        </li>
        <li class="nav-item">
          <a class="sk-nav-link nav-link" href="../../user_guide.html">User Guide</a>
        </li>
        <li class="nav-item">
          <a class="sk-nav-link nav-link" href="../../modules/classes.html">API</a>
        </li>
        <li class="nav-item">
          <a class="sk-nav-link nav-link" href="../index.html">Examples</a>
        </li>
        <li class="nav-item">
          <a class="sk-nav-link nav-link nav-more-item-mobile-items" href="../../getting_started.html">Getting Started</a>
        </li>
        <li class="nav-item">
          <a class="sk-nav-link nav-link nav-more-item-mobile-items" href="../../development.html">Development</a>
        </li>
        <li class="nav-item">
          <a class="sk-nav-link nav-link nav-more-item-mobile-items" href="https://github.com/scikit-optimize/scikit-optimize">GitHub</a>
        </li>
        <li class="nav-item">
          <a class="sk-nav-link nav-link nav-more-item-mobile-items" href="https://scikit-optimize.github.io/dev/versions.html">Other Versions</a>
        </li>
        <li class="nav-item dropdown nav-more-item-dropdown">
          <a class="sk-nav-link nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">More</a>
          <div class="dropdown-menu" aria-labelledby="navbarDropdown">
              <a class="sk-nav-dropdown-item dropdown-item" href="../../getting_started.html">Getting Started</a>
              <a class="sk-nav-dropdown-item dropdown-item" href="../../development.html">Development</a>
              <a class="sk-nav-dropdown-item dropdown-item" href="https://github.com/scikit-optimize/scikit-optimize">GitHub</a>
              <a class="sk-nav-dropdown-item dropdown-item" href="https://scikit-optimize.github.io/dev/versions.html">Other Versions</a>
          </div>
        </li>
      </ul>
      <div id="searchbox" role="search">
          <div class="searchformwrapper">
          <form class="search" action="../../search.html" method="get">
            <input class="sk-search-text-input" type="text" name="q" aria-labelledby="searchlabel" />
            <input class="sk-search-text-btn" type="submit" value="Go" />
          </form>
          </div>
      </div>
    </div>
  </div>
</nav>
<div class="d-flex" id="sk-doc-wrapper">
    <input type="checkbox" name="sk-toggle-checkbox" id="sk-toggle-checkbox">
    <label id="sk-sidemenu-toggle" class="sk-btn-toggle-toc btn sk-btn-primary" for="sk-toggle-checkbox">Toggle Menu</label>
    <div id="sk-sidebar-wrapper" class="border-right">
      <div class="sk-sidebar-toc-wrapper">
        <div class="sk-sidebar-toc-logo">
          <a href="../../index.html">
            <img
              class="sk-brand-img"
              src="../../_static/logo.png"
              alt="logo"/>
          </a>
        </div>
        <div class="btn-group w-100 mb-2" role="group" aria-label="rellinks">
            <a href="partial-dependence-plot-with-categorical.html" role="button" class="btn sk-btn-rellink py-1" sk-rellink-tooltip="Partial Dependence Plots with categorical values">Prev</a><a href="../index.html" role="button" class="btn sk-btn-rellink py-1" sk-rellink-tooltip="Examples">Up</a>
            <a href="partial-dependence-plot-2D.html" role="button" class="btn sk-btn-rellink py-1" sk-rellink-tooltip="Partial Dependence Plots 2D">Next</a>
        </div>
        <div class="alert alert-danger p-1 mb-2" role="alert">
          <p class="text-center mb-0">
          <strong>scikit-optimize 0.8.dev0</strong><br/>
            <a href="https://scikit-optimize.github.io/dev/versions.html">Other versions</a>
          </p>
        </div>
          <div class="sk-sidebar-toc">
            <ul>
<li><a class="reference internal" href="#">Visualizing optimization results</a><ul>
<li><a class="reference internal" href="#toy-models">Toy models</a></li>
<li><a class="reference internal" href="#starting-with-branin">Starting with <code class="docutils literal notranslate"><span class="pre">branin</span></code></a></li>
<li><a class="reference internal" href="#evaluating-the-objective-function">Evaluating the objective function</a><ul>
<li><a class="reference internal" href="#partial-dependence-plots">Partial dependence plots</a></li>
</ul>
</li>
<li><a class="reference internal" href="#random-sampling">Random sampling</a></li>
<li><a class="reference internal" href="#working-in-six-dimensions">Working in six dimensions</a></li>
<li><a class="reference internal" href="#going-from-6-to-6-2-dimensions">Going from 6 to 6+2 dimensions</a></li>
</ul>
</li>
</ul>

          </div>
      </div>
    </div>
    <div id="sk-page-content-wrapper">
      <div class="sk-page-content container-fluid body px-md-3" role="main">
        
  <div class="sphx-glr-download-link-note admonition note">
<p class="admonition-title">Note</p>
<p>Click <a class="reference internal" href="#sphx-glr-download-auto-examples-plots-visualizing-results-py"><span class="std std-ref">here</span></a> to download the full example code or to run this example in your browser via Binder</p>
</div>
<div class="sphx-glr-example-title section" id="visualizing-optimization-results">
<span id="sphx-glr-auto-examples-plots-visualizing-results-py"></span><h1>Visualizing optimization results<a class="headerlink" href="#visualizing-optimization-results" title="Permalink to this headline">Â¶</a></h1>
<p>Tim Head, August 2016.
Reformatted by Holger Nahrstaedt 2020</p>
<p>Bayesian optimization or sequential model-based optimization uses a surrogate
model to model the expensive to evaluate objective function <code class="docutils literal notranslate"><span class="pre">func</span></code>. It is
this model that is used to determine at which points to evaluate the expensive
objective next.</p>
<p>To help understand why the optimization process is proceeding the way it is,
it is useful to plot the location and order of the points at which the
objective is evaluated. If everything is working as expected, early samples
will be spread over the whole parameter space and later samples should
cluster around the minimum.</p>
<p>The <a class="reference internal" href="../../modules/generated/skopt.plots.plot_evaluations.html#skopt.plots.plot_evaluations" title="skopt.plots.plot_evaluations"><code class="xref py py-class docutils literal notranslate"><span class="pre">plots.plot_evaluations</span></code></a> function helps with visualizing the location and
order in which samples are evaluated for objectives with an arbitrary
number of dimensions.</p>
<p>The <a class="reference internal" href="../../modules/generated/skopt.plots.plot_objective.html#skopt.plots.plot_objective" title="skopt.plots.plot_objective"><code class="xref py py-class docutils literal notranslate"><span class="pre">plots.plot_objective</span></code></a> function plots the partial dependence of the objective,
as represented by the surrogate model, for each dimension and as pairs of the
input dimensions.</p>
<p>All of the minimizers implemented in <code class="docutils literal notranslate"><span class="pre">skopt</span></code> return an [<code class="docutils literal notranslate"><span class="pre">OptimizeResult</span></code>]()
instance that can be inspected. Both <a class="reference internal" href="../../modules/generated/skopt.plots.plot_evaluations.html#skopt.plots.plot_evaluations" title="skopt.plots.plot_evaluations"><code class="xref py py-class docutils literal notranslate"><span class="pre">plots.plot_evaluations</span></code></a> and <a class="reference internal" href="../../modules/generated/skopt.plots.plot_objective.html#skopt.plots.plot_objective" title="skopt.plots.plot_objective"><code class="xref py py-class docutils literal notranslate"><span class="pre">plots.plot_objective</span></code></a>
are helpers that do just that</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="vm">__doc__</span><span class="p">)</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">seed</span><span class="p">(</span><span class="mi">123</span><span class="p">)</span>

<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
</pre></div>
</div>
<div class="section" id="toy-models">
<h2>Toy models<a class="headerlink" href="#toy-models" title="Permalink to this headline">Â¶</a></h2>
<p>We will use two different toy models to demonstrate how <a class="reference internal" href="../../modules/generated/skopt.plots.plot_evaluations.html#skopt.plots.plot_evaluations" title="skopt.plots.plot_evaluations"><code class="xref py py-class docutils literal notranslate"><span class="pre">plots.plot_evaluations</span></code></a>
works.</p>
<p>The first model is the <a class="reference internal" href="../../modules/generated/skopt.benchmarks.branin.html#skopt.benchmarks.branin" title="skopt.benchmarks.branin"><code class="xref py py-class docutils literal notranslate"><span class="pre">benchmarks.branin</span></code></a> function which has two dimensions and three
minima.</p>
<p>The second model is the <code class="docutils literal notranslate"><span class="pre">hart6</span></code> function which has six dimension which makes
it hard to visualize. This will show off the utility of
<a class="reference internal" href="../../modules/generated/skopt.plots.plot_evaluations.html#skopt.plots.plot_evaluations" title="skopt.plots.plot_evaluations"><code class="xref py py-class docutils literal notranslate"><span class="pre">plots.plot_evaluations</span></code></a>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">skopt.benchmarks</span> <span class="kn">import</span> <a href="../../modules/generated/skopt.benchmarks.branin.html#skopt.benchmarks.branin" title="View documentation for skopt.benchmarks.branin"><span class="n">branin</span></a> <span class="k">as</span> <a href="../../modules/generated/skopt.benchmarks.branin.html#skopt.benchmarks.branin" title="View documentation for skopt.benchmarks.branin"><span class="n">branin</span></a>
<span class="kn">from</span> <span class="nn">skopt.benchmarks</span> <span class="kn">import</span> <span class="n">hart6</span> <span class="k">as</span> <span class="n">hart6_</span>


<span class="c1"># redefined `hart6` to allow adding arbitrary &quot;noise&quot; dimensions</span>
<span class="k">def</span> <span class="nf">hart6</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">hart6_</span><span class="p">(</span><span class="n">x</span><span class="p">[:</span><span class="mi">6</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="section" id="starting-with-branin">
<h2>Starting with <code class="docutils literal notranslate"><span class="pre">branin</span></code><a class="headerlink" href="#starting-with-branin" title="Permalink to this headline">Â¶</a></h2>
<p>To start letâs take advantage of the fact that <a class="reference internal" href="../../modules/generated/skopt.benchmarks.branin.html#skopt.benchmarks.branin" title="skopt.benchmarks.branin"><code class="xref py py-class docutils literal notranslate"><span class="pre">benchmarks.branin</span></code></a> is a simple
function which can be visualised in two dimensions.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">matplotlib.colors</span> <span class="kn">import</span> <a href="https://matplotlib.org/api/_as_gen/matplotlib.colors.LogNorm.html#matplotlib.colors.LogNorm" title="View documentation for matplotlib.colors.LogNorm"><span class="n">LogNorm</span></a>


<span class="k">def</span> <span class="nf">plot_branin</span><span class="p">():</span>
    <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <a href="https://matplotlib.org/api/_as_gen/matplotlib.pyplot.subplots.html#matplotlib.pyplot.subplots" title="View documentation for matplotlib.pyplot.subplots"><span class="n">plt</span><span class="o">.</span><span class="n">subplots</span></a><span class="p">()</span>

    <span class="n">x1_values</span> <span class="o">=</span> <a href="https://docs.scipy.org/doc/numpy/reference/generated/numpy.linspace.html#numpy.linspace" title="View documentation for numpy.linspace"><span class="n">np</span><span class="o">.</span><span class="n">linspace</span></a><span class="p">(</span><span class="o">-</span><span class="mi">5</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>
    <span class="n">x2_values</span> <span class="o">=</span> <a href="https://docs.scipy.org/doc/numpy/reference/generated/numpy.linspace.html#numpy.linspace" title="View documentation for numpy.linspace"><span class="n">np</span><span class="o">.</span><span class="n">linspace</span></a><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>
    <span class="n">x_ax</span><span class="p">,</span> <span class="n">y_ax</span> <span class="o">=</span> <a href="https://docs.scipy.org/doc/numpy/reference/generated/numpy.meshgrid.html#numpy.meshgrid" title="View documentation for numpy.meshgrid"><span class="n">np</span><span class="o">.</span><span class="n">meshgrid</span></a><span class="p">(</span><span class="n">x1_values</span><span class="p">,</span> <span class="n">x2_values</span><span class="p">)</span>
    <span class="n">vals</span> <span class="o">=</span> <a href="https://docs.scipy.org/doc/numpy/reference/generated/numpy.c_.html#numpy.c_" title="View documentation for numpy.c_"><span class="n">np</span><span class="o">.</span><span class="n">c_</span></a><span class="p">[</span><span class="n">x_ax</span><span class="o">.</span><span class="n">ravel</span><span class="p">(),</span> <span class="n">y_ax</span><span class="o">.</span><span class="n">ravel</span><span class="p">()]</span>
    <span class="n">fx</span> <span class="o">=</span> <a href="https://docs.scipy.org/doc/numpy/reference/generated/numpy.reshape.html#numpy.reshape" title="View documentation for numpy.reshape"><span class="n">np</span><span class="o">.</span><span class="n">reshape</span></a><span class="p">([</span><a href="../../modules/generated/skopt.benchmarks.branin.html#skopt.benchmarks.branin" title="View documentation for skopt.benchmarks.branin"><span class="n">branin</span></a><span class="p">(</span><span class="n">val</span><span class="p">)</span> <span class="k">for</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">vals</span><span class="p">],</span> <span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="mi">100</span><span class="p">))</span>

    <span class="n">cm</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">pcolormesh</span><span class="p">(</span><span class="n">x_ax</span><span class="p">,</span> <span class="n">y_ax</span><span class="p">,</span> <span class="n">fx</span><span class="p">,</span>
                       <span class="n">norm</span><span class="o">=</span><a href="https://matplotlib.org/api/_as_gen/matplotlib.colors.LogNorm.html#matplotlib.colors.LogNorm" title="View documentation for matplotlib.colors.LogNorm"><span class="n">LogNorm</span></a><span class="p">(</span><span class="n">vmin</span><span class="o">=</span><span class="n">fx</span><span class="o">.</span><span class="n">min</span><span class="p">(),</span>
                                    <span class="n">vmax</span><span class="o">=</span><span class="n">fx</span><span class="o">.</span><span class="n">max</span><span class="p">()),</span>
                       <span class="n">cmap</span><span class="o">=</span><span class="s1">&#39;viridis_r&#39;</span><span class="p">)</span>

    <span class="n">minima</span> <span class="o">=</span> <a href="https://docs.scipy.org/doc/numpy/reference/generated/numpy.array.html#numpy.array" title="View documentation for numpy.array"><span class="n">np</span><span class="o">.</span><span class="n">array</span></a><span class="p">([[</span><span class="o">-</span><a href="https://docs.scipy.org/doc/numpy/reference/constants.html#numpy.pi" title="View documentation for numpy.pi"><span class="n">np</span><span class="o">.</span><span class="n">pi</span></a><span class="p">,</span> <span class="mf">12.275</span><span class="p">],</span> <span class="p">[</span><span class="o">+</span><a href="https://docs.scipy.org/doc/numpy/reference/constants.html#numpy.pi" title="View documentation for numpy.pi"><span class="n">np</span><span class="o">.</span><span class="n">pi</span></a><span class="p">,</span> <span class="mf">2.275</span><span class="p">],</span> <span class="p">[</span><span class="mf">9.42478</span><span class="p">,</span> <span class="mf">2.475</span><span class="p">]])</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">minima</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">minima</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">],</span> <span class="s2">&quot;r.&quot;</span><span class="p">,</span> <span class="n">markersize</span><span class="o">=</span><span class="mi">14</span><span class="p">,</span>
            <span class="n">lw</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Minima&quot;</span><span class="p">)</span>

    <span class="n">cb</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">colorbar</span><span class="p">(</span><span class="n">cm</span><span class="p">)</span>
    <span class="n">cb</span><span class="o">.</span><span class="n">set_label</span><span class="p">(</span><span class="s2">&quot;f(x)&quot;</span><span class="p">)</span>

    <span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s2">&quot;best&quot;</span><span class="p">,</span> <span class="n">numpoints</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

    <span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s2">&quot;$X_0$&quot;</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">([</span><span class="o">-</span><span class="mi">5</span><span class="p">,</span> <span class="mi">10</span><span class="p">])</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">&quot;$X_1$&quot;</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">15</span><span class="p">])</span>


<span class="n">plot_branin</span><span class="p">()</span>
</pre></div>
</div>
<img alt="../../_images/sphx_glr_visualizing-results_001.png" class="sphx-glr-single-img" src="../../_images/sphx_glr_visualizing-results_001.png" />
</div>
<div class="section" id="evaluating-the-objective-function">
<h2>Evaluating the objective function<a class="headerlink" href="#evaluating-the-objective-function" title="Permalink to this headline">Â¶</a></h2>
<p>Next we use an extra trees based minimizer to find one of the minima of the
<a class="reference internal" href="../../modules/generated/skopt.benchmarks.branin.html#skopt.benchmarks.branin" title="skopt.benchmarks.branin"><code class="xref py py-class docutils literal notranslate"><span class="pre">benchmarks.branin</span></code></a> function. Then we visualize at which points the objective is being
evaluated using <a class="reference internal" href="../../modules/generated/skopt.plots.plot_evaluations.html#skopt.plots.plot_evaluations" title="skopt.plots.plot_evaluations"><code class="xref py py-class docutils literal notranslate"><span class="pre">plots.plot_evaluations</span></code></a>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">functools</span> <span class="kn">import</span> <span class="n">partial</span>
<span class="kn">from</span> <span class="nn">skopt.plots</span> <span class="kn">import</span> <a href="../../modules/generated/skopt.plots.plot_evaluations.html#skopt.plots.plot_evaluations" title="View documentation for skopt.plots.plot_evaluations"><span class="n">plot_evaluations</span></a>
<span class="kn">from</span> <span class="nn">skopt</span> <span class="kn">import</span> <span class="n">gp_minimize</span><span class="p">,</span> <a href="../../modules/generated/skopt.forest_minimize.html#skopt.forest_minimize" title="View documentation for skopt.forest_minimize"><span class="n">forest_minimize</span></a><span class="p">,</span> <a href="../../modules/generated/skopt.dummy_minimize.html#skopt.dummy_minimize" title="View documentation for skopt.dummy_minimize"><span class="n">dummy_minimize</span></a>


<span class="n">bounds</span> <span class="o">=</span> <span class="p">[(</span><span class="o">-</span><span class="mf">5.0</span><span class="p">,</span> <span class="mf">10.0</span><span class="p">),</span> <span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">15.0</span><span class="p">)]</span>
<span class="n">n_calls</span> <span class="o">=</span> <span class="mi">160</span>

<span class="n">forest_res</span> <span class="o">=</span> <a href="../../modules/generated/skopt.forest_minimize.html#skopt.forest_minimize" title="View documentation for skopt.forest_minimize"><span class="n">forest_minimize</span></a><span class="p">(</span><a href="../../modules/generated/skopt.benchmarks.branin.html#skopt.benchmarks.branin" title="View documentation for skopt.benchmarks.branin"><span class="n">branin</span></a><span class="p">,</span> <span class="n">bounds</span><span class="p">,</span> <span class="n">n_calls</span><span class="o">=</span><span class="n">n_calls</span><span class="p">,</span>
                             <span class="n">base_estimator</span><span class="o">=</span><span class="s2">&quot;ET&quot;</span><span class="p">,</span> <span class="n">random_state</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>

<span class="n">_</span> <span class="o">=</span> <a href="../../modules/generated/skopt.plots.plot_evaluations.html#skopt.plots.plot_evaluations" title="View documentation for skopt.plots.plot_evaluations"><span class="n">plot_evaluations</span></a><span class="p">(</span><span class="n">forest_res</span><span class="p">,</span> <span class="n">bins</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
</pre></div>
</div>
<img alt="../../_images/sphx_glr_visualizing-results_002.png" class="sphx-glr-single-img" src="../../_images/sphx_glr_visualizing-results_002.png" />
<p><a class="reference internal" href="../../modules/generated/skopt.plots.plot_evaluations.html#skopt.plots.plot_evaluations" title="skopt.plots.plot_evaluations"><code class="xref py py-class docutils literal notranslate"><span class="pre">plots.plot_evaluations</span></code></a> creates a grid of size <code class="docutils literal notranslate"><span class="pre">n_dims</span></code> by <code class="docutils literal notranslate"><span class="pre">n_dims</span></code>.
The diagonal shows histograms for each of the dimensions. In the lower
triangle (just one plot in this case) a two dimensional scatter plot of all
points is shown. The order in which points were evaluated is encoded in the
color of each point. Darker/purple colors correspond to earlier samples and
lighter/yellow colors correspond to later samples. A red point shows the
location of the minimum found by the optimization process.</p>
<p>You should be able to see that points start clustering around the location
of the true miminum. The histograms show that the objective is evaluated
more often at locations near to one of the three minima.</p>
<p>Using <a class="reference internal" href="../../modules/generated/skopt.plots.plot_objective.html#skopt.plots.plot_objective" title="skopt.plots.plot_objective"><code class="xref py py-class docutils literal notranslate"><span class="pre">plots.plot_objective</span></code></a> we can visualise the one dimensional partial
dependence of the surrogate model for each dimension. The contour plot in
the bottom left corner shows the two dimensional partial dependence. In this
case this is the same as simply plotting the objective as it only has two
dimensions.</p>
<div class="section" id="partial-dependence-plots">
<h3>Partial dependence plots<a class="headerlink" href="#partial-dependence-plots" title="Permalink to this headline">Â¶</a></h3>
<p>Partial dependence plots were proposed by
[Friedman (2001)]_
as a method for interpreting the importance of input features used in
gradient boosting machines. Given a function of <span class="math notranslate nohighlight">\(k\)</span>: variables
<span class="math notranslate nohighlight">\(y=f\left(x_1, x_2, ..., x_k\right)\)</span>: the
partial dependence of $f$ on the $i$-th variable $x_i$ is calculated as:
<span class="math notranslate nohighlight">\(\phi\left( x_i \right) = \frac{1}{N} \sum^N_{j=0}f\left(x_{1,j}, x_{2,j}, ..., x_i, ..., x_{k,j}\right)\)</span>:
with the sum running over a set of $N$ points drawn at random from the
search space.</p>
<p>The idea is to visualize how the value of <span class="math notranslate nohighlight">\(x_j\)</span>: influences the function
<span class="math notranslate nohighlight">\(f\)</span>: after averaging out the influence of all other variables.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">skopt.plots</span> <span class="kn">import</span> <a href="../../modules/generated/skopt.plots.plot_objective.html#skopt.plots.plot_objective" title="View documentation for skopt.plots.plot_objective"><span class="n">plot_objective</span></a>

<span class="n">_</span> <span class="o">=</span> <a href="../../modules/generated/skopt.plots.plot_objective.html#skopt.plots.plot_objective" title="View documentation for skopt.plots.plot_objective"><span class="n">plot_objective</span></a><span class="p">(</span><span class="n">forest_res</span><span class="p">)</span>
</pre></div>
</div>
<img alt="../../_images/sphx_glr_visualizing-results_003.png" class="sphx-glr-single-img" src="../../_images/sphx_glr_visualizing-results_003.png" />
<p>The two dimensional partial dependence plot can look like the true
objective but it does not have to. As points at which the objective function
is being evaluated are concentrated around the suspected minimum the
surrogate model sometimes is not a good representation of the objective far
away from the minima.</p>
</div>
</div>
<div class="section" id="random-sampling">
<h2>Random sampling<a class="headerlink" href="#random-sampling" title="Permalink to this headline">Â¶</a></h2>
<p>Compare this to a minimizer which picks points at random. There is no
structure visible in the order in which it evaluates the objective. Because
there is no model involved in the process of picking sample points at
random, we can not plot the partial dependence of the model.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">dummy_res</span> <span class="o">=</span> <a href="../../modules/generated/skopt.dummy_minimize.html#skopt.dummy_minimize" title="View documentation for skopt.dummy_minimize"><span class="n">dummy_minimize</span></a><span class="p">(</span><a href="../../modules/generated/skopt.benchmarks.branin.html#skopt.benchmarks.branin" title="View documentation for skopt.benchmarks.branin"><span class="n">branin</span></a><span class="p">,</span> <span class="n">bounds</span><span class="p">,</span> <span class="n">n_calls</span><span class="o">=</span><span class="n">n_calls</span><span class="p">,</span> <span class="n">random_state</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>

<span class="n">_</span> <span class="o">=</span> <a href="../../modules/generated/skopt.plots.plot_evaluations.html#skopt.plots.plot_evaluations" title="View documentation for skopt.plots.plot_evaluations"><span class="n">plot_evaluations</span></a><span class="p">(</span><span class="n">dummy_res</span><span class="p">,</span> <span class="n">bins</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
</pre></div>
</div>
<img alt="../../_images/sphx_glr_visualizing-results_004.png" class="sphx-glr-single-img" src="../../_images/sphx_glr_visualizing-results_004.png" />
</div>
<div class="section" id="working-in-six-dimensions">
<h2>Working in six dimensions<a class="headerlink" href="#working-in-six-dimensions" title="Permalink to this headline">Â¶</a></h2>
<p>Visualising what happens in two dimensions is easy, where
<a class="reference internal" href="../../modules/generated/skopt.plots.plot_evaluations.html#skopt.plots.plot_evaluations" title="skopt.plots.plot_evaluations"><code class="xref py py-class docutils literal notranslate"><span class="pre">plots.plot_evaluations</span></code></a> and <a class="reference internal" href="../../modules/generated/skopt.plots.plot_objective.html#skopt.plots.plot_objective" title="skopt.plots.plot_objective"><code class="xref py py-class docutils literal notranslate"><span class="pre">plots.plot_objective</span></code></a> start to be useful is when the
number of dimensions grows. They take care of many of the more mundane
things needed to make good plots of all combinations of the dimensions.</p>
<p>The next example uses class:<code class="docutils literal notranslate"><span class="pre">benchmarks.hart6</span></code> which has six dimensions and shows both
<a class="reference internal" href="../../modules/generated/skopt.plots.plot_evaluations.html#skopt.plots.plot_evaluations" title="skopt.plots.plot_evaluations"><code class="xref py py-class docutils literal notranslate"><span class="pre">plots.plot_evaluations</span></code></a> and <a class="reference internal" href="../../modules/generated/skopt.plots.plot_objective.html#skopt.plots.plot_objective" title="skopt.plots.plot_objective"><code class="xref py py-class docutils literal notranslate"><span class="pre">plots.plot_objective</span></code></a>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">bounds</span> <span class="o">=</span> <span class="p">[(</span><span class="mf">0.</span><span class="p">,</span> <span class="mf">1.</span><span class="p">),]</span> <span class="o">*</span> <span class="mi">6</span>

<span class="n">forest_res</span> <span class="o">=</span> <a href="../../modules/generated/skopt.forest_minimize.html#skopt.forest_minimize" title="View documentation for skopt.forest_minimize"><span class="n">forest_minimize</span></a><span class="p">(</span><span class="n">hart6</span><span class="p">,</span> <span class="n">bounds</span><span class="p">,</span> <span class="n">n_calls</span><span class="o">=</span><span class="n">n_calls</span><span class="p">,</span>
                             <span class="n">base_estimator</span><span class="o">=</span><span class="s2">&quot;ET&quot;</span><span class="p">,</span> <span class="n">random_state</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">_</span> <span class="o">=</span> <a href="../../modules/generated/skopt.plots.plot_evaluations.html#skopt.plots.plot_evaluations" title="View documentation for skopt.plots.plot_evaluations"><span class="n">plot_evaluations</span></a><span class="p">(</span><span class="n">forest_res</span><span class="p">)</span>
<span class="n">_</span> <span class="o">=</span> <a href="../../modules/generated/skopt.plots.plot_objective.html#skopt.plots.plot_objective" title="View documentation for skopt.plots.plot_objective"><span class="n">plot_objective</span></a><span class="p">(</span><span class="n">forest_res</span><span class="p">,</span> <span class="n">n_samples</span><span class="o">=</span><span class="mi">40</span><span class="p">)</span>
</pre></div>
</div>
<ul class="sphx-glr-horizontal">
<li><img alt="../../_images/sphx_glr_visualizing-results_005.png" class="sphx-glr-multi-img" src="../../_images/sphx_glr_visualizing-results_005.png" />
</li>
<li><img alt="../../_images/sphx_glr_visualizing-results_006.png" class="sphx-glr-multi-img" src="../../_images/sphx_glr_visualizing-results_006.png" />
</li>
</ul>
</div>
<div class="section" id="going-from-6-to-6-2-dimensions">
<h2>Going from 6 to 6+2 dimensions<a class="headerlink" href="#going-from-6-to-6-2-dimensions" title="Permalink to this headline">Â¶</a></h2>
<p>To make things more interesting letâs add two dimension to the problem.
As <code class="xref py py-class docutils literal notranslate"><span class="pre">benchmarks.hart6</span></code> only depends on six dimensions we know that for this problem
the new dimensions will be âflatâ or uninformative. This is clearly visible
in both the placement of samples and the partial dependence plots.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">bounds</span> <span class="o">=</span> <span class="p">[(</span><span class="mf">0.</span><span class="p">,</span> <span class="mf">1.</span><span class="p">),]</span> <span class="o">*</span> <span class="mi">8</span>
<span class="n">n_calls</span> <span class="o">=</span> <span class="mi">200</span>

<span class="n">forest_res</span> <span class="o">=</span> <a href="../../modules/generated/skopt.forest_minimize.html#skopt.forest_minimize" title="View documentation for skopt.forest_minimize"><span class="n">forest_minimize</span></a><span class="p">(</span><span class="n">hart6</span><span class="p">,</span> <span class="n">bounds</span><span class="p">,</span> <span class="n">n_calls</span><span class="o">=</span><span class="n">n_calls</span><span class="p">,</span>
                             <span class="n">base_estimator</span><span class="o">=</span><span class="s2">&quot;ET&quot;</span><span class="p">,</span> <span class="n">random_state</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>

<span class="n">_</span> <span class="o">=</span> <a href="../../modules/generated/skopt.plots.plot_evaluations.html#skopt.plots.plot_evaluations" title="View documentation for skopt.plots.plot_evaluations"><span class="n">plot_evaluations</span></a><span class="p">(</span><span class="n">forest_res</span><span class="p">)</span>
<span class="n">_</span> <span class="o">=</span> <a href="../../modules/generated/skopt.plots.plot_objective.html#skopt.plots.plot_objective" title="View documentation for skopt.plots.plot_objective"><span class="n">plot_objective</span></a><span class="p">(</span><span class="n">forest_res</span><span class="p">,</span> <span class="n">n_samples</span><span class="o">=</span><span class="mi">40</span><span class="p">)</span>

<span class="c1"># .. [Friedman (2001)] `doi:10.1214/aos/1013203451 section 8.2 &lt;http://projecteuclid.org/euclid.aos/1013203451&gt;`</span>
</pre></div>
</div>
<ul class="sphx-glr-horizontal">
<li><img alt="../../_images/sphx_glr_visualizing-results_007.png" class="sphx-glr-multi-img" src="../../_images/sphx_glr_visualizing-results_007.png" />
</li>
<li><img alt="../../_images/sphx_glr_visualizing-results_008.png" class="sphx-glr-multi-img" src="../../_images/sphx_glr_visualizing-results_008.png" />
</li>
</ul>
<p class="sphx-glr-timing"><strong>Total running time of the script:</strong> ( 7 minutes  46.158 seconds)</p>
<p><strong>Estimated memory usage:</strong>  89 MB</p>
<div class="sphx-glr-footer class sphx-glr-footer-example docutils container" id="sphx-glr-download-auto-examples-plots-visualizing-results-py">
<div class="binder-badge docutils container">
<a class="reference external image-reference" href="https://mybinder.org/v2/gh/scikit-optimize/scikit-optimize/master?urlpath=lab/tree/notebooks/auto_examples/plots/visualizing-results.ipynb"><img alt="https://mybinder.org/badge_logo.svg" src="https://mybinder.org/badge_logo.svg" width="150px" /></a>
</div>
<div class="sphx-glr-download docutils container">
<p><a class="reference download internal" download="" href="../../_downloads/70b506c92a51b155038b4a3fa37b1f32/visualizing-results.py"><code class="xref download docutils literal notranslate"><span class="pre">Download</span> <span class="pre">Python</span> <span class="pre">source</span> <span class="pre">code:</span> <span class="pre">visualizing-results.py</span></code></a></p>
</div>
<div class="sphx-glr-download docutils container">
<p><a class="reference download internal" download="" href="../../_downloads/6e32b232b2fb7887cfe8ea013442a759/visualizing-results.ipynb"><code class="xref download docutils literal notranslate"><span class="pre">Download</span> <span class="pre">Jupyter</span> <span class="pre">notebook:</span> <span class="pre">visualizing-results.ipynb</span></code></a></p>
</div>
</div>
<p class="sphx-glr-signature"><a class="reference external" href="https://sphinx-gallery.github.io">Gallery generated by Sphinx-Gallery</a></p>
</div>
</div>


      </div>
    <div class="container">
      <footer class="sk-content-footer">
            &copy; 2017 - 2020, scikit-optimize contributors (BSD License).
          <a href="../../_sources/auto_examples/plots/visualizing-results.rst.txt" rel="nofollow">Show this page source</a>
      </footer>
    </div>
  </div>
</div>
<script src="../../_static/js/vendor/bootstrap.min.js"></script>


<script>
$(document).ready(function() {
    /* Add a [>>>] button on the top-right corner of code sampler to hide
     * the >>> and ... prompts and the output and thus make the code
     * copyable. */
    var div = $('.highlight-python .highlight,' +
                '.highlight-python3 .highlight,' +
                '.highlight-pycon .highlight,' +
		'.highlight-default .highlight')
    var pre = div.find('pre');

    // get the styles from the current theme
    pre.parent().parent().css('position', 'relative');
    var hide_text = 'Hide prompts and outputs';
    var show_text = 'Show prompts and outputs';

    // create and add the button to all the code blocks that contain >>>
    div.each(function(index) {
        var jthis = $(this);
        if (jthis.find('.gp').length > 0) {
            var button = $('<span class="copybutton">&gt;&gt;&gt;</span>');
            button.attr('title', hide_text);
            button.data('hidden', 'false');
            jthis.prepend(button);
        }
        // tracebacks (.gt) contain bare text elements that need to be
        // wrapped in a span to work with .nextUntil() (see later)
        jthis.find('pre:has(.gt)').contents().filter(function() {
            return ((this.nodeType == 3) && (this.data.trim().length > 0));
        }).wrap('<span>');
    });

    // define the behavior of the button when it's clicked
    $('.copybutton').click(function(e){
        e.preventDefault();
        var button = $(this);
        if (button.data('hidden') === 'false') {
            // hide the code output
            button.parent().find('.go, .gp, .gt').hide();
            button.next('pre').find('.gt').nextUntil('.gp, .go').css('visibility', 'hidden');
            button.css('text-decoration', 'line-through');
            button.attr('title', show_text);
            button.data('hidden', 'true');
        } else {
            // show the code output
            button.parent().find('.go, .gp, .gt').show();
            button.next('pre').find('.gt').nextUntil('.gp, .go').css('visibility', 'visible');
            button.css('text-decoration', 'none');
            button.attr('title', hide_text);
            button.data('hidden', 'false');
        }
    });

	/*** Add permalink buttons next to glossary terms ***/
	$('dl.glossary > dt[id]').append(function() {
		return ('<a class="headerlink" href="#' +
			    this.getAttribute('id') +
			    '" title="Permalink to this term">Â¶</a>');
	});
  /*** Hide navbar when scrolling down ***/
  // Returns true when headerlink target matches hash in url
  (function() {
    hashTargetOnTop = function() {
        var hash = window.location.hash;
        if ( hash.length < 2 ) { return false; }

        var target = document.getElementById( hash.slice(1) );
        if ( target === null ) { return false; }

        var top = target.getBoundingClientRect().top;
        return (top < 2) && (top > -2);
    };

    // Hide navbar on load if hash target is on top
    var navBar = document.getElementById("navbar");
    var navBarToggler = document.getElementById("sk-navbar-toggler");
    var navBarHeightHidden = "-" + navBar.getBoundingClientRect().height + "px";
    var $window = $(window);

    hideNavBar = function() {
        navBar.style.top = navBarHeightHidden;
    };

    showNavBar = function() {
        navBar.style.top = "0";
    }

    if (hashTargetOnTop()) {
        hideNavBar()
    }

    var prevScrollpos = window.pageYOffset;
    hideOnScroll = function(lastScrollTop) {
        if (($window.width() < 768) && (navBarToggler.getAttribute("aria-expanded") === 'true')) {
            return;
        }
        if (lastScrollTop > 2 && (prevScrollpos <= lastScrollTop) || hashTargetOnTop()){
            hideNavBar()
        } else {
            showNavBar()
        }
        prevScrollpos = lastScrollTop;
    };

    /*** high performance scroll event listener***/
    var raf = window.requestAnimationFrame ||
        window.webkitRequestAnimationFrame ||
        window.mozRequestAnimationFrame ||
        window.msRequestAnimationFrame ||
        window.oRequestAnimationFrame;
    var lastScrollTop = $window.scrollTop();

    if (raf) {
        loop();
    }

    function loop() {
        var scrollTop = $window.scrollTop();
        if (lastScrollTop === scrollTop) {
            raf(loop);
            return;
        } else {
            lastScrollTop = scrollTop;
            hideOnScroll(lastScrollTop);
            raf(loop);
        }
    }
  })();
});

</script>
    
<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script>
    
    <script src="https://scikit-optimize.github.io/versionwarning.js"></script>
</body>
</html>