

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="Description" content="scikit-optimize: machine learning in Python">

  
  <title>skopt.optimizer.base_minimize &mdash; scikit-optimize 0.7 documentation</title>
  
  <link rel="canonical" href="https://scikit-optimize.github.io/modules/generated/skopt.optimizer.base_minimize.html" />

  
  <link rel="shortcut icon" href="../../_static/favicon.ico"/>
  

  <link rel="stylesheet" href="../../_static/css/vendor/bootstrap.min.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/gallery.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
<script id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
<script src="../../_static/jquery.js"></script> 
</head>
<body>
<nav id="navbar" class="sk-docs-navbar navbar navbar-expand-md navbar-light bg-light py-0">
  <div class="container-fluid sk-docs-container px-0">
      <a class="navbar-brand py-0" href="../../index.html">
        <img
          class="sk-brand-img"
          src="../../_static/logo.png"
          alt="logo"/>
      </a>
    <button
      id="sk-navbar-toggler"
      class="navbar-toggler"
      type="button"
      data-toggle="collapse"
      data-target="#navbarSupportedContent"
      aria-controls="navbarSupportedContent"
      aria-expanded="false"
      aria-label="Toggle navigation"
    >
      <span class="navbar-toggler-icon"></span>
    </button>

    <div class="sk-navbar-collapse collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav mr-auto">
        <li class="nav-item">
          <a class="sk-nav-link nav-link" href="../../install.html">Install</a>
        </li>
        <li class="nav-item">
          <a class="sk-nav-link nav-link" href="../../user_guide.html">User Guide</a>
        </li>
        <li class="nav-item">
          <a class="sk-nav-link nav-link" href="../classes.html">API</a>
        </li>
        <li class="nav-item">
          <a class="sk-nav-link nav-link" href="../../auto_examples/index.html">Examples</a>
        </li>
        <li class="nav-item">
          <a class="sk-nav-link nav-link nav-more-item-mobile-items" href="../../getting_started.html">Getting Started</a>
        </li>
        <li class="nav-item">
          <a class="sk-nav-link nav-link nav-more-item-mobile-items" href="../../development.html">Development</a>
        </li>
        <li class="nav-item">
          <a class="sk-nav-link nav-link nav-more-item-mobile-items" href="https://github.com/scikit-optimize/scikit-optimize">GitHub</a>
        </li>
        <li class="nav-item dropdown nav-more-item-dropdown">
          <a class="sk-nav-link nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">More</a>
          <div class="dropdown-menu" aria-labelledby="navbarDropdown">
              <a class="sk-nav-dropdown-item dropdown-item" href="../../getting_started.html">Getting Started</a>
              <a class="sk-nav-dropdown-item dropdown-item" href="../../development.html">Development</a>
              <a class="sk-nav-dropdown-item dropdown-item" href="https://github.com/scikit-optimize/scikit-optimize">GitHub</a>
          </div>
        </li>
      </ul>
      <div id="searchbox" role="search">
          <div class="searchformwrapper">
          <form class="search" action="../../search.html" method="get">
            <input class="sk-search-text-input" type="text" name="q" aria-labelledby="searchlabel" />
            <input class="sk-search-text-btn" type="submit" value="Go" />
          </form>
          </div>
      </div>
    </div>
  </div>
</nav>
<div class="d-flex" id="sk-doc-wrapper">
    <input type="checkbox" name="sk-toggle-checkbox" id="sk-toggle-checkbox">
    <label id="sk-sidemenu-toggle" class="sk-btn-toggle-toc btn sk-btn-primary" for="sk-toggle-checkbox">Toggle Menu</label>
    <div id="sk-sidebar-wrapper" class="border-right">
      <div class="sk-sidebar-toc-wrapper">
        <div class="sk-sidebar-toc-logo">
          <a href="../../index.html">
            <img
              class="sk-brand-img"
              src="../../_static/logo.png"
              alt="logo"/>
          </a>
        </div>
        <div class="btn-group w-100 mb-2" role="group" aria-label="rellinks">
            <a href="skopt.optimizer.Optimizer.html" role="button" class="btn sk-btn-rellink py-1" sk-rellink-tooltip="skopt.optimizer.Optimizer">Prev</a><a href="../classes.html" role="button" class="btn sk-btn-rellink py-1" sk-rellink-tooltip="API Reference">Up</a>
            <a href="skopt.optimizer.dummy_minimize.html" role="button" class="btn sk-btn-rellink py-1" sk-rellink-tooltip="skopt.optimizer.dummy_minimize">Next</a>
        </div>
        <div class="alert alert-danger p-1 mb-2" role="alert">
          <p class="text-center mb-0">
          <strong>scikit-optimize 0.7</strong><br/>
          </p>
        </div>
          <div class="sk-sidebar-toc">
            <ul>
<li><a class="reference internal" href="#"><code class="xref py py-mod docutils literal notranslate"><span class="pre">skopt.optimizer</span></code>.base_minimize</a></li>
</ul>

          </div>
      </div>
    </div>
    <div id="sk-page-content-wrapper">
      <div class="sk-page-content container-fluid body px-md-3" role="main">
        
  <div class="section" id="skopt-optimizer-base-minimize">
<h1><a class="reference internal" href="../classes.html#module-skopt.optimizer" title="skopt.optimizer"><code class="xref py py-mod docutils literal notranslate"><span class="pre">skopt.optimizer</span></code></a>.base_minimize<a class="headerlink" href="#skopt-optimizer-base-minimize" title="Permalink to this headline">¶</a></h1>
<dl class="function">
<dt id="skopt.optimizer.base_minimize">
<code class="sig-prename descclassname">skopt.optimizer.</code><code class="sig-name descname">base_minimize</code><span class="sig-paren">(</span><em class="sig-param">func</em>, <em class="sig-param">dimensions</em>, <em class="sig-param">base_estimator</em>, <em class="sig-param">n_calls=100</em>, <em class="sig-param">n_random_starts=10</em>, <em class="sig-param">acq_func='EI'</em>, <em class="sig-param">acq_optimizer='lbfgs'</em>, <em class="sig-param">x0=None</em>, <em class="sig-param">y0=None</em>, <em class="sig-param">random_state=None</em>, <em class="sig-param">verbose=False</em>, <em class="sig-param">callback=None</em>, <em class="sig-param">n_points=10000</em>, <em class="sig-param">n_restarts_optimizer=5</em>, <em class="sig-param">xi=0.01</em>, <em class="sig-param">kappa=1.96</em>, <em class="sig-param">n_jobs=1</em>, <em class="sig-param">model_queue_size=None</em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/scikit-optimize/scikit-optimize/blob/d9062c2/skopt/optimizer/base.py#L23"><span class="viewcode-link">[source]</span></a><a class="reference internal" href="../../_modules/skopt/optimizer/base.html#base_minimize"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#skopt.optimizer.base_minimize" title="Permalink to this definition">¶</a></dt>
<dd><p>Base optimizer class
:param func: Function to minimize. Should take a single list of parameters</p>
<blockquote>
<div><p>and return the objective value.</p>
<p>If you have a search-space where all dimensions have names,
then you can use <code class="docutils literal notranslate"><span class="pre">skopt.utils.use_named_args</span></code> as a decorator
on your objective function, in order to call it directly
with the named arguments. See <code class="docutils literal notranslate"><span class="pre">use_named_args</span></code> for an example.</p>
</div></blockquote>
<dl class="field-list">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dimensions</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.8)"><em>list</em></a><em>, </em><em>shape</em><em> (</em><em>n_dims</em><em>,</em><em>)</em>) – <p>List of search space dimensions.
Each search dimension can be defined either as</p>
<ul>
<li><p>a <code class="docutils literal notranslate"><span class="pre">(lower_bound,</span> <span class="pre">upper_bound)</span></code> tuple (for <code class="docutils literal notranslate"><span class="pre">Real</span></code> or <code class="docutils literal notranslate"><span class="pre">Integer</span></code>
dimensions),</p></li>
<li><p>a <code class="docutils literal notranslate"><span class="pre">(lower_bound,</span> <span class="pre">upper_bound,</span> <span class="pre">&quot;prior&quot;)</span></code> tuple (for <code class="docutils literal notranslate"><span class="pre">Real</span></code>
dimensions),</p></li>
<li><p>as a list of categories (for <code class="docutils literal notranslate"><span class="pre">Categorical</span></code> dimensions), or</p></li>
<li><p>an instance of a <code class="docutils literal notranslate"><span class="pre">Dimension</span></code> object (<code class="docutils literal notranslate"><span class="pre">Real</span></code>, <code class="docutils literal notranslate"><span class="pre">Integer</span></code> or
<code class="docutils literal notranslate"><span class="pre">Categorical</span></code>).</p></li>
</ul>
<blockquote>
<div><p>NOTE: The upper and lower bounds are inclusive for <code class="docutils literal notranslate"><span class="pre">Integer</span></code>
dimensions.</p>
</div></blockquote>
</p></li>
<li><p><strong>base_estimator</strong> (<em>sklearn regressor</em>) – Should inherit from <code class="docutils literal notranslate"><span class="pre">sklearn.base.RegressorMixin</span></code>.
In addition, should have an optional <code class="docutils literal notranslate"><span class="pre">return_std</span></code> argument,
which returns <code class="docutils literal notranslate"><span class="pre">std(Y</span> <span class="pre">|</span> <span class="pre">x)`</span></code> along with <code class="docutils literal notranslate"><span class="pre">E[Y</span> <span class="pre">|</span> <span class="pre">x]</span></code>.</p></li>
<li><p><strong>n_calls</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a><em>, </em><em>default=100</em>) – Maximum number of calls to <code class="docutils literal notranslate"><span class="pre">func</span></code>. An objective fucntion will
always be evaluated this number of times; Various options to
supply initialization points do not affect this value.</p></li>
<li><p><strong>n_random_starts</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a><em>, </em><em>default=10</em>) – Number of evaluations of <code class="docutils literal notranslate"><span class="pre">func</span></code> with random points before
approximating it with <code class="docutils literal notranslate"><span class="pre">base_estimator</span></code>.</p></li>
<li><p><strong>acq_func</strong> (<em>string</em><em>, </em><em>default=`&quot;EI&quot;`</em>) – <p>Function to minimize over the posterior distribution. Can be either</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;LCB&quot;</span></code> for lower confidence bound,</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;EI&quot;</span></code> for negative expected improvement,</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;PI&quot;</span></code> for negative probability of improvement.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;EIps&quot;</span></code> for negated expected improvement per second to take into
account the function compute time. Then, the objective function is
assumed to return two values, the first being the objective value and
the second being the time taken in seconds.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;PIps&quot;</span></code> for negated probability of improvement per second. The
return type of the objective function is assumed to be similar to
that of <a href="#id1"><span class="problematic" id="id2">`</span></a>”EIps</p></li>
</ul>
</p></li>
<li><p><strong>acq_optimizer</strong> (string, <code class="docutils literal notranslate"><span class="pre">&quot;sampling&quot;</span></code> or <code class="docutils literal notranslate"><span class="pre">&quot;lbfgs&quot;</span></code>, default=`”lbfgs”`) – <p>Method to minimize the acquistion function. The fit model
is updated with the optimal value obtained by optimizing <code class="docutils literal notranslate"><span class="pre">acq_func</span></code>
with <code class="docutils literal notranslate"><span class="pre">acq_optimizer</span></code>.</p>
<ul>
<li><p>If set to <code class="docutils literal notranslate"><span class="pre">&quot;sampling&quot;</span></code>, then <code class="docutils literal notranslate"><span class="pre">acq_func</span></code> is optimized by computing
<code class="docutils literal notranslate"><span class="pre">acq_func</span></code> at <code class="docutils literal notranslate"><span class="pre">n_points</span></code> randomly sampled points and the smallest
value found is used.</p></li>
<li><dl class="simple">
<dt>If set to <code class="docutils literal notranslate"><span class="pre">&quot;lbfgs&quot;</span></code>, then</dt><dd><ul>
<li><p>The <code class="docutils literal notranslate"><span class="pre">n_restarts_optimizer</span></code> no. of points which the acquisition
function is least are taken as start points.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;lbfgs&quot;</span></code> is run for 20 iterations with these points as initial
points to find local minima.</p></li>
<li><p>The optimal of these local minima is used to update the prior.</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
</p></li>
<li><p><strong>x0</strong> (list, list of lists or <code class="docutils literal notranslate"><span class="pre">None</span></code>) – <p>Initial input points.</p>
<ul>
<li><p>If it is a list of lists, use it as a list of input points. If no
corresponding outputs <code class="docutils literal notranslate"><span class="pre">y0</span></code> are supplied, then len(x0) of total
calls to the objective function will be spent evaluating the points
in <code class="docutils literal notranslate"><span class="pre">x0</span></code>. If the corresponding outputs are provided, then they will
be used together with evaluated points during a run of the algorithm
to construct a surrogate.</p></li>
<li><p>If it is a list, use it as a single initial input point. The
algorithm will spend 1 call to evaluate the initial point, if the
outputs are not provided.</p></li>
<li><p>If it is <code class="docutils literal notranslate"><span class="pre">None</span></code>, no initial input points are used.</p></li>
</ul>
</p></li>
<li><p><strong>y0</strong> (list, scalar or <code class="docutils literal notranslate"><span class="pre">None</span></code>) – <p>Objective values at initial input points.</p>
<ul>
<li><p>If it is a list, then it corresponds to evaluations of the function
at each element of <code class="docutils literal notranslate"><span class="pre">x0</span></code> : the i-th element of <code class="docutils literal notranslate"><span class="pre">y0</span></code> corresponds
to the function evaluated at the i-th element of <code class="docutils literal notranslate"><span class="pre">x0</span></code>.</p></li>
<li><p>If it is a scalar, then it corresponds to the evaluation of the
function at <code class="docutils literal notranslate"><span class="pre">x0</span></code>.</p></li>
<li><p>If it is None and <code class="docutils literal notranslate"><span class="pre">x0</span></code> is provided, then the function is evaluated
at each element of <code class="docutils literal notranslate"><span class="pre">x0</span></code>.</p></li>
</ul>
</p></li>
<li><p><strong>random_state</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a><em>, </em><em>RandomState instance</em><em>, or </em><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.8)"><em>None</em></a><em> (</em><em>default</em><em>)</em>) – Set random state to something other than None for reproducible
results.</p></li>
<li><p><strong>verbose</strong> (<em>boolean</em><em>, </em><em>default=False</em>) – Control the verbosity. It is advised to set the verbosity to True
for long optimization runs.</p></li>
<li><p><strong>callback</strong> (<em>callable</em><em>, </em><em>list of callables</em><em>, </em><em>optional</em>) – If callable then <code class="docutils literal notranslate"><span class="pre">callback(res)</span></code> is called after each call to <code class="docutils literal notranslate"><span class="pre">func</span></code>.
If list of callables, then each callable in the list is called.</p></li>
<li><p><strong>n_points</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a><em>, </em><em>default=10000</em>) – If <code class="docutils literal notranslate"><span class="pre">acq_optimizer</span></code> is set to <code class="docutils literal notranslate"><span class="pre">&quot;sampling&quot;</span></code>, then <code class="docutils literal notranslate"><span class="pre">acq_func</span></code> is
optimized by computing <code class="docutils literal notranslate"><span class="pre">acq_func</span></code> at <code class="docutils literal notranslate"><span class="pre">n_points</span></code> randomly sampled
points.</p></li>
<li><p><strong>n_restarts_optimizer</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a><em>, </em><em>default=5</em>) – The number of restarts of the optimizer when <code class="docutils literal notranslate"><span class="pre">acq_optimizer</span></code>
is <code class="docutils literal notranslate"><span class="pre">&quot;lbfgs&quot;</span></code>.</p></li>
<li><p><strong>xi</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.8)"><em>float</em></a><em>, </em><em>default=0.01</em>) – Controls how much improvement one wants over the previous best
values. Used when the acquisition is either <code class="docutils literal notranslate"><span class="pre">&quot;EI&quot;</span></code> or <code class="docutils literal notranslate"><span class="pre">&quot;PI&quot;</span></code>.</p></li>
<li><p><strong>kappa</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.8)"><em>float</em></a><em>, </em><em>default=1.96</em>) – Controls how much of the variance in the predicted values should be
taken into account. If set to be very high, then we are favouring
exploration over exploitation and vice versa.
Used when the acquisition is <code class="docutils literal notranslate"><span class="pre">&quot;LCB&quot;</span></code>.</p></li>
<li><p><strong>n_jobs</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a><em>, </em><em>default=1</em>) – Number of cores to run in parallel while running the lbfgs
optimizations over the acquisition function. Valid only when
<code class="docutils literal notranslate"><span class="pre">acq_optimizer</span></code> is set to “lbfgs.”
Defaults to 1 core. If <code class="docutils literal notranslate"><span class="pre">n_jobs=-1</span></code>, then number of jobs is set
to number of cores.</p></li>
<li><p><strong>model_queue_size</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a><em> or </em><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.8)"><em>None</em></a><em>, </em><em>default=None</em>) – Keeps list of models only as long as the argument given. In the
case of None, the list has no capped length.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl>
<dt><strong>res</strong><span class="classifier"><code class="docutils literal notranslate"><span class="pre">OptimizeResult</span></code>, scipy object</span></dt><dd><p>The optimization result returned as a OptimizeResult object.
Important attributes are:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">x</span></code> [list]: location of the minimum.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">fun</span></code> [float]: function value at the minimum.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">models</span></code>: surrogate models used for each iteration.</p></li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">x_iters</span></code> [list of lists]: location of function evaluation for each</dt><dd><p>iteration.</p>
</dd>
</dl>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">func_vals</span></code> [array]: function value for each iteration.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">space</span></code> [Space]: the optimization space.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">specs</span></code> [dict]`: the call specifications.</p></li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">rng</span></code> [RandomState instance]: State of the random state</dt><dd><p>at the end of minimization.</p>
</dd>
</dl>
</li>
</ul>
<p>For more details related to the OptimizeResult object, refer
<a class="reference external" href="http://docs.scipy.org/doc/scipy/reference/generated/scipy.optimize.OptimizeResult.html">http://docs.scipy.org/doc/scipy/reference/generated/scipy.optimize.OptimizeResult.html</a></p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<div class="clearer"></div></div>


      </div>
    <div class="container">
      <footer class="sk-content-footer">
            &copy; 2017 - 2020, The scikit-optimize contributors..
          <a href="../../_sources/modules/generated/skopt.optimizer.base_minimize.rst.txt" rel="nofollow">Show this page source</a>
      </footer>
    </div>
  </div>
</div>
<script src="../../_static/js/vendor/bootstrap.min.js"></script>


<script>
$(document).ready(function() {
    /* Add a [>>>] button on the top-right corner of code samples to hide
     * the >>> and ... prompts and the output and thus make the code
     * copyable. */
    var div = $('.highlight-python .highlight,' +
                '.highlight-python3 .highlight,' +
                '.highlight-pycon .highlight,' +
		'.highlight-default .highlight')
    var pre = div.find('pre');

    // get the styles from the current theme
    pre.parent().parent().css('position', 'relative');
    var hide_text = 'Hide prompts and outputs';
    var show_text = 'Show prompts and outputs';

    // create and add the button to all the code blocks that contain >>>
    div.each(function(index) {
        var jthis = $(this);
        if (jthis.find('.gp').length > 0) {
            var button = $('<span class="copybutton">&gt;&gt;&gt;</span>');
            button.attr('title', hide_text);
            button.data('hidden', 'false');
            jthis.prepend(button);
        }
        // tracebacks (.gt) contain bare text elements that need to be
        // wrapped in a span to work with .nextUntil() (see later)
        jthis.find('pre:has(.gt)').contents().filter(function() {
            return ((this.nodeType == 3) && (this.data.trim().length > 0));
        }).wrap('<span>');
    });

    // define the behavior of the button when it's clicked
    $('.copybutton').click(function(e){
        e.preventDefault();
        var button = $(this);
        if (button.data('hidden') === 'false') {
            // hide the code output
            button.parent().find('.go, .gp, .gt').hide();
            button.next('pre').find('.gt').nextUntil('.gp, .go').css('visibility', 'hidden');
            button.css('text-decoration', 'line-through');
            button.attr('title', show_text);
            button.data('hidden', 'true');
        } else {
            // show the code output
            button.parent().find('.go, .gp, .gt').show();
            button.next('pre').find('.gt').nextUntil('.gp, .go').css('visibility', 'visible');
            button.css('text-decoration', 'none');
            button.attr('title', hide_text);
            button.data('hidden', 'false');
        }
    });

	/*** Add permalink buttons next to glossary terms ***/
	$('dl.glossary > dt[id]').append(function() {
		return ('<a class="headerlink" href="#' +
			    this.getAttribute('id') +
			    '" title="Permalink to this term">¶</a>');
	});
  /*** Hide navbar when scrolling down ***/
  // Returns true when headerlink target matches hash in url
  (function() {
    hashTargetOnTop = function() {
        var hash = window.location.hash;
        if ( hash.length < 2 ) { return false; }

        var target = document.getElementById( hash.slice(1) );
        if ( target === null ) { return false; }

        var top = target.getBoundingClientRect().top;
        return (top < 2) && (top > -2);
    };

    // Hide navbar on load if hash target is on top
    var navBar = document.getElementById("navbar");
    var navBarToggler = document.getElementById("sk-navbar-toggler");
    var navBarHeightHidden = "-" + navBar.getBoundingClientRect().height + "px";
    var $window = $(window);

    hideNavBar = function() {
        navBar.style.top = navBarHeightHidden;
    };

    showNavBar = function() {
        navBar.style.top = "0";
    }

    if (hashTargetOnTop()) {
        hideNavBar()
    }

    var prevScrollpos = window.pageYOffset;
    hideOnScroll = function(lastScrollTop) {
        if (($window.width() < 768) && (navBarToggler.getAttribute("aria-expanded") === 'true')) {
            return;
        }
        if (lastScrollTop > 2 && (prevScrollpos <= lastScrollTop) || hashTargetOnTop()){
            hideNavBar()
        } else {
            showNavBar()
        }
        prevScrollpos = lastScrollTop;
    };

    /*** high performance scroll event listener***/
    var raf = window.requestAnimationFrame ||
        window.webkitRequestAnimationFrame ||
        window.mozRequestAnimationFrame ||
        window.msRequestAnimationFrame ||
        window.oRequestAnimationFrame;
    var lastScrollTop = $window.scrollTop();

    if (raf) {
        loop();
    }

    function loop() {
        var scrollTop = $window.scrollTop();
        if (lastScrollTop === scrollTop) {
            raf(loop);
            return;
        } else {
            lastScrollTop = scrollTop;
            hideOnScroll(lastScrollTop);
            raf(loop);
        }
    }
  })();
});

</script>
    
<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script>
    
</body>
</html>